# Operation Requirements æ¨¡å—æ¢å¤å®Œæˆ

## ğŸ¯ é—®é¢˜èƒŒæ™¯

åœ¨ä¹‹å‰çš„è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œ`operation-requirements`ç›¸å…³çš„å†…å®¹è¢«æ³¨é‡Šæ‰äº†ï¼Œå¯¼è‡´ä»¥ä¸‹åŠŸèƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼š

- åŒ…è£¹æ“ä½œéœ€æ±‚çš„å…³è”æŸ¥è¯¢
- æ“ä½œéœ€æ±‚ API ç«¯ç‚¹
- æ¨¡å‹ä¹‹é—´çš„å¤šå¯¹å¤šå…³ç³»

## âœ… å·²æ¢å¤çš„å†…å®¹

### 1. æ¨¡å‹å…³è”æ¢å¤

#### Package.js æ¨¡å‹

- **æ¢å¤**: Package ä¸ OperationRequirement çš„å¤šå¯¹å¤šå…³è”
- **å…³è”å**: `operationRequirements`
- **ä¸­é—´è¡¨**: `PackageOperationRequirement`

```javascript
// æ¢å¤çš„ä»£ç 
Package.belongsToMany(models.OperationRequirement, {
  through: models.PackageOperationRequirement,
  foreignKey: "package_id",
  otherKey: "operation_requirement_id",
  as: "operationRequirements",
});
```

#### OperationRequirement.js æ¨¡å‹

- **æ¢å¤**: OperationRequirement ä¸ Package çš„å¤šå¯¹å¤šå…³è”
- **å…³è”å**: `packages`
- **ä¸­é—´è¡¨**: `PackageOperationRequirement`

```javascript
// æ¢å¤çš„ä»£ç 
OperationRequirement.belongsToMany(models.Package, {
  through: models.PackageOperationRequirement,
  foreignKey: "operation_requirement_id",
  otherKey: "package_id",
  as: "packages",
});
```

### 2. ä¿®å¤çš„é—®é¢˜

#### ç©ºæ¨¡å‹æ–‡ä»¶

- **é—®é¢˜**: `InbondLog.js` æ–‡ä»¶ä¸ºç©ºï¼ˆ0 å­—èŠ‚ï¼‰ï¼Œå¯¼è‡´æ¨¡å‹åŠ è½½å¤±è´¥
- **è§£å†³**: åˆ›å»ºäº†å®Œæ•´çš„ InbondLog æ¨¡å‹å®šä¹‰
- **åŠŸèƒ½**: è®°å½• Inbond æ“ä½œå†å²å’Œå˜æ›´æ—¥å¿—

#### æŸ¥è¯¢ä¼˜åŒ–

- **é—®é¢˜**: åœ¨åŒ…è£¹æ“ä½œéœ€æ±‚æŸ¥è¯¢ä¸­ï¼Œinclude å…³è”ä¸æ­£ç¡®
- **ä¿®å¤**: ç§»é™¤äº†é”™è¯¯çš„ User å…³è”ï¼Œä¿ç•™æ­£ç¡®çš„ through å±æ€§

#### é…ç½®ç³»ç»Ÿé›†æˆ

- **æ›´æ–°**: æ·»åŠ äº†ç»Ÿä¸€é…ç½®ç³»ç»Ÿçš„å¯¼å…¥
- **æ”¹è¿›**: ä¸æ–°çš„ç¯å¢ƒå˜é‡ç®¡ç†ç³»ç»Ÿä¿æŒä¸€è‡´

### 3. æ¸…ç†å·¥ä½œ

#### é‡å¤æ–‡ä»¶åˆ é™¤

- **åˆ é™¤**: `PackageOperationRequirement.js.disabled`
- **åŸå› **: é¿å…ä¸æ­£å¸¸çš„æ¨¡å‹æ–‡ä»¶å†²çª

## ğŸ”§ API åŠŸèƒ½éªŒè¯

### å¯ç”¨çš„ç«¯ç‚¹

1. **GET** `/api/common/operation-requirements/available`

   - è·å–å¯ç”¨çš„æ“ä½œéœ€æ±‚é€‰é¡¹
   - æ”¯æŒåˆ†ç±»ç­›é€‰å’Œæœç´¢
   - âœ… æµ‹è¯•é€šè¿‡

2. **POST** `/api/common/packages/:package_id/operation-requirements`

   - ä¸ºåŒ…è£¹æ·»åŠ æ“ä½œéœ€æ±‚
   - éœ€è¦ `client.packages.edit` æƒé™

3. **GET** `/api/common/packages/:package_id/operation-requirements`

   - è·å–åŒ…è£¹çš„æ“ä½œéœ€æ±‚
   - åŒ…å«å®Œæ•´çš„å…³è”æ•°æ®

4. **DELETE** `/api/common/packages/:package_id/operation-requirements/:requirement_id`

   - ç§»é™¤åŒ…è£¹çš„æ“ä½œéœ€æ±‚
   - éœ€è¦ç›¸åº”æƒé™

5. **PATCH** `/api/common/packages/:package_id/operation-requirements/:requirement_id/status`
   - æ›´æ–°æ“ä½œéœ€æ±‚æ‰§è¡ŒçŠ¶æ€
   - ä»“åº“æ“ä½œå‘˜ä½¿ç”¨

### æ”¯æŒçš„æ“ä½œéœ€æ±‚åˆ†ç±»

- `handling` - æ¬è¿è¦æ±‚
- `storage` - å­˜å‚¨è¦æ±‚
- `transport` - è¿è¾“è¦æ±‚
- `temperature` - æ¸©åº¦è¦æ±‚
- `security` - å®‰å…¨è¦æ±‚
- `special` - ç‰¹æ®Šè¦æ±‚
- `other` - å…¶ä»–

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ“ä½œéœ€æ±‚ç®¡ç†

- **å¤šåˆ†ç±»æ”¯æŒ**: 7 ç§ä¸åŒç±»å‹çš„æ“ä½œéœ€æ±‚
- **ä¼˜å…ˆçº§ç®¡ç†**: low/medium/high/critical å››ä¸ªçº§åˆ«
- **è§†è§‰æ ‡è¯†**: æ”¯æŒå›¾æ ‡å’Œé¢œè‰²ä»£ç 
- **çŠ¶æ€è·Ÿè¸ª**: pending/in_progress/completed/skipped

### åŒ…è£¹å…³è”

- **æ‰¹é‡æ·»åŠ **: æ”¯æŒä¸€æ¬¡æ·»åŠ å¤šä¸ªæ“ä½œéœ€æ±‚
- **ä¸ªæ€§åŒ–å¤‡æ³¨**: æ¯ä¸ªåŒ…è£¹å¯ä»¥æœ‰ç‰¹å®šçš„é¢å¤–è¯´æ˜
- **ä¼˜å…ˆçº§è¦†ç›–**: å¯ä»¥é’ˆå¯¹ç‰¹å®šåŒ…è£¹è°ƒæ•´ä¼˜å…ˆçº§
- **çŠ¶æ€ç®¡ç†**: è·Ÿè¸ªæ¯ä¸ªéœ€æ±‚çš„æ‰§è¡ŒçŠ¶æ€

### æƒé™æ§åˆ¶

- **å®¢æˆ·ç«¯æƒé™**: `client.packages.edit` - å®¢æˆ·å¯ä»¥æ·»åŠ /ç§»é™¤éœ€æ±‚
- **ä»“åº“æƒé™**: `warehouse.packages.edit` - ä»“åº“å¯ä»¥æ›´æ–°æ‰§è¡ŒçŠ¶æ€
- **è®¿é—®æ§åˆ¶**: åŸºäºç”¨æˆ·ç±»å‹é™åˆ¶è®¿é—®èŒƒå›´

## ğŸ” æ•°æ®åº“ç»“æ„

### operation_requirements è¡¨

- å­˜å‚¨æ‰€æœ‰å¯ç”¨çš„æ“ä½œéœ€æ±‚å®šä¹‰
- åŒ…å«å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­æ–‡/è‹±æ–‡åç§°ï¼‰
- æ”¯æŒåˆ†ç±»ã€ä¼˜å…ˆçº§ã€è§†è§‰æ ·å¼é…ç½®

### package_operation_requirements è¡¨

- åŒ…è£¹ä¸æ“ä½œéœ€æ±‚çš„å…³è”è¡¨
- å­˜å‚¨é¢å¤–å¤‡æ³¨ã€ä¼˜å…ˆçº§è¦†ç›–ã€æ‰§è¡ŒçŠ¶æ€
- è®°å½•åˆ›å»ºäººã€å®Œæˆäººã€æ—¶é—´æˆ³

### inbond_logs è¡¨ï¼ˆæ–°å¢ï¼‰

- è®°å½• Inbond ç›¸å…³æ“ä½œçš„å†å²
- æ”¯æŒ JSON æ ¼å¼çš„å˜æ›´å‰åå€¼å¯¹æ¯”
- å®Œæ•´çš„æ“ä½œè¿½è¸ªå’Œå®¡è®¡åŠŸèƒ½

## ğŸ“‹ æµ‹è¯•ç»“æœ

### æœåŠ¡å™¨å¯åŠ¨

- âœ… æ¨¡å‹åŠ è½½æˆåŠŸ
- âœ… å…³è”å…³ç³»æ­£å¸¸
- âœ… è·¯ç”±æŒ‚è½½å®Œæˆ
- âœ… é…ç½®ç³»ç»Ÿé›†æˆ

### API æµ‹è¯•

- âœ… å®¢æˆ·ç«¯ç™»å½•æ­£å¸¸
- âœ… è·å–æ“ä½œéœ€æ±‚åˆ—è¡¨æˆåŠŸ
- âœ… æƒé™éªŒè¯æœ‰æ•ˆ
- âœ… è¿”å›æ•°æ®æ ¼å¼æ­£ç¡®

## ğŸ‰ æ¢å¤æˆæœ

é€šè¿‡è¿™æ¬¡æ¢å¤å·¥ä½œï¼š

1. **å®Œå…¨æ¢å¤**: æ“ä½œéœ€æ±‚æ¨¡å—çš„æ‰€æœ‰åŠŸèƒ½
2. **é—®é¢˜ä¿®å¤**: è§£å†³äº†æ¨¡å‹åŠ è½½å¤±è´¥çš„æ ¹æœ¬åŸå› 
3. **ç³»ç»Ÿé›†æˆ**: ä¸æ–°çš„é…ç½®ç®¡ç†ç³»ç»Ÿä¿æŒä¸€è‡´
4. **åŠŸèƒ½éªŒè¯**: ç¡®ä¿æ‰€æœ‰ API ç«¯ç‚¹æ­£å¸¸å·¥ä½œ

ç°åœ¨ `operation-requirements` æ¨¡å—å·²ç»å®Œå…¨æ¢å¤ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨åŒ…è£¹æ“ä½œéœ€æ±‚ç®¡ç†çš„æ‰€æœ‰åŠŸèƒ½ã€‚
